# Типы и структура СУБД - Абрамов Евгений

## Задание 1

1. Электронные чеки в JSON-виде:
Тип СУБД: Для данной сущности можно использовать Document-oriented (документоориентированные) базы данных. Такие базы данных хранят данные в формате документов, например, в JSON, и обеспечивают хорошую поддержку для сложных иерархических структур данных.

2. Склады и автомобильные дороги для логистической компании:
Тип СУБД: Для этой сущности, наилучшим выбором будет применение графовых баз данных. Графовые базы данных эффективно моделируют связи и отношения между объектами, такими как склады и автомобильные дороги, что позволяет быстро выполнять сложные запросы и анализ маршрутов.

3. Генеалогические деревья:
Тип СУБД: Для хранения генеалогических деревьев рекомендуется использовать иерархические базы данных. Это позволит удобно представить иерархические связи между различными членами семьи и обеспечит эффективные запросы для работы с такими структурами.

4. Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутентификации:
Тип СУБД: В данном случае подойдет In-Memory база данных, которая хранит данные в оперативной памяти. Это обеспечит быстрый доступ к данным, что особенно важно для кэширования идентификаторов клиентов с ограниченным временем жизни.

5. Отношения клиент-покупка для интернет-магазина:
Тип СУБД: Для хранения отношений клиент-покупка рекомендуется использовать Реляционные базы данных (SQL). Такие базы данных обеспечивают структурированное хранение данных и поддерживают сложные запросы, которые часто требуются для работы с данными интернет-магазина, такими как отчеты о продажах, аналитика и т. д.

Важно отметить, что выбор определенного типа СУБД также может зависеть от существующей инфраструктуры и опыта команды разработчиков. Кроме того, в некоторых случаях может быть целесообразно использовать комбинацию различных типов СУБД для различных сущностей в одном приложении, если это позволит оптимизировать производительность и совместимость с требованиями бизнеса.

## Задание 2

Согласно CAP-теореме, системы распределенного хранения данных могут обеспечивать одновременно не более двух из трех следующих свойств: согласованность (Consistency), доступность (Availability) и устойчивость к разделению (Partition Tolerance).

Давайте классифицируем каждую из представленных реализаций системы согласно CAP-теореме:

- Данные записываются на все узлы с задержкой до часа (асинхронная запись):
    Такая реализация системы обеспечивает устойчивость к разделению (Partition Tolerance), так как данные записываются на все узлы независимо от сетевой доступности. Однако, из-за асинхронной записи, возможно нарушение согласованности данных (Consistency) в течение времени задержки, когда данные могут быть неоднородными на разных узлах. В случае возникновения различий между узлами, система будет обеспечивать доступность (Availability) данных на каждом узле, но это может привести к временным различиям в значениях.

Классификация: AP (Доступность, Устойчивость к разделению).

- При сетевых сбоях система может разделиться на 2 раздельных кластера:
    Ситуация, когда система разделяется на два кластера из-за сетевых сбоев, означает, что система обеспечивает устойчивость к разделению (Partition Tolerance). Однако, разделение на кластеры может привести к тому, что данные будут несогласованными между кластерами (Consistency) до момента, когда связь между кластерами восстановится. В такой ситуации доступность (Availability) данных может быть нарушена, если один из кластеров становится недоступным.

Классификация: CP (Согласованность, Устойчивость к разделению).

- Система может не прислать корректный ответ или сбросить соединение:
    Такая реализация системы может быть классифицирована как обеспечивающая доступность (Availability), так как она может продолжать принимать запросы даже при возникновении ошибок или сбросе соединения. Однако, из-за возможности неотправки корректного ответа, система может нарушить согласованность (Consistency) данных, так как клиенты могут получать различные или устаревшие данные при повторных запросах.

Классификация: AP (Доступность, Устойчивость к разделению).

Согласно PACELC-теореме, варианты классификации могут дополнительно уточняться по времени и вероятности возникновения различных состояний системы. Например, синхронная репликация может обеспечивать CP при отсутствии разделения, но может переходить в AP при разделении для обеспечения доступности. В общем случае, PACELC-теорема предоставляет более точное и гибкое описание компромиссов между CAP-свойствами в распределенных системах.

## Задание 3

В теории, базы данных и системы могут комбинировать принципы BASE (Basically Available, Soft state, Eventually consistent) и ACID (Atomicity, Consistency, Isolation, Durability) в разных частях или уровнях системы. Однако, в практике это обычно редкость и зачастую возникают конфликты между этими принципами, которые затрудняют их одновременное применение в одной системе.

ACID описывает характеристики транзакций в реляционных базах данных, обеспечивающие согласованность и надежность данных. Эти принципы подразумевают, что транзакции должны быть атомарны (либо выполняются полностью, либо не выполняются вообще), согласованными (после завершения транзакции данные должны быть в согласованном состоянии), изолированными (транзакции не должны влиять друг на друга) и надежными (данные, подтвержденные транзакциями, должны быть сохранены даже при сбоях системы).

BASE, с другой стороны, используется в нереляционных базах данных и распределенных системах для обеспечения высокой доступности и масштабируемости данных. Он уходит от согласованности в пользу доступности и упрощения обновления данных, предоставляя "мягкое состояние" данных, которое может быть временно несогласованным, но со временем сойдется к консистентному состоянию.

Соединение принципов BASE и ACID в одной системе может быть проблематичным по следующим причинам:

1. Конфликт между доступностью и согласованностью: Принцип BASE подразумевает жертвование согласованностью в пользу доступности, в то время как ACID ставит акцент на согласованность. Эти принципы часто противоположны друг другу, и их одновременное применение может быть сложным.

2. Различные типы данных: Принцип BASE наиболее подходит для хранения неструктурированных данных и распределенных систем с высокой доступностью. С другой стороны, ACID применяется к реляционным базам данных с жесткими требованиями к согласованности данных. Переход от реляционной модели к нереляционной может потребовать значительных изменений в архитектуре системы.

3. Сложность реализации: Комбинирование принципов BASE и ACID может быть сложным в плане проектирования, разработки и обслуживания системы. Требуется тщательно анализировать и учитывать компромиссы, которые необходимо сделать для поддержания обоих принципов.

В целом, в большинстве случаев, системы выбирают один из подходов (ACID или BASE) в зависимости от своих основных требований и характеристик данных. Однако, возможно использование принципов BASE и ACID в различных частях или уровнях системы, что называется "гибридной" архитектурой. Например, можно использовать ACID для транзакций с жесткими требованиями к согласованности, а для хранения больших объемов данных и обеспечения высокой доступности - применять BASE. Это позволяет более гибко подходить к различным требованиям приложения и обеспечивать оптимальное соотношение между согласованностью, доступностью и производительностью.

## Задание 4

Описываемая система, которая предоставляет key-value хранилище с механизмом Pub/Sub (публикации и подписки), звучит очень похоже на Redis - популярную In-memory базу данных с открытым исходным кодом.

Redis является key-value хранилищем, где каждое значение хранится по уникальному ключу. Он поддерживает различные типы данных, такие как строки, списки, множества, хэши и т.д. Redis также предоставляет механизм Pub/Sub, который позволяет клиентам публиковать сообщения в каналы и подписываться на каналы для получения сообщений.

Как системное решение, Redis имеет свои преимущества:

1. Высокая производительность: Redis работает в оперативной памяти, что обеспечивает очень быстрый доступ к данным. Это делает его идеальным для кэширования данных и выполнения операций с высокой производительностью.

2. Простота в использовании: Redis имеет простой API с небольшим числом команд, что делает его легким в освоении и интеграции с приложениями.

3. Механизм Pub/Sub: Возможность публикации и подписки делает Redis хорошим выбором для реализации асинхронных механизмов обмена сообщениями между компонентами системы.

Тем не менее, выбор Redis также имеет свои минусы:

1. Ограниченный объем памяти: Так как Redis работает в оперативной памяти, объем доступной памяти ограничен физическими возможностями сервера. Это может быть ограничивающим фактором для хранения больших объемов данных.

2. Потеря данных при сбоях: Поскольку Redis является in-memory хранилищем, при сбоях системы данные, которые еще не были записаны на диск, могут быть потеряны.

3. Ограниченная гибкость запросов: Redis предоставляет базовые операции с данными, и для выполнения сложных запросов может потребоваться использование дополнительных инструментов.

4. Однопоточность: Однопоточная природа Redis означает, что выполнение одновременных запросов обрабатывается последовательно, что может стать узким местом при высоких нагрузках.
